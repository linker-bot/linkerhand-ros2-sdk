# hand_config_const.py
from typing import Dict, List, Optional
from dataclasses import dataclass, field
from types import MappingProxyType

@dataclass(frozen=True)        # frozen=True 让实例真正只读
class HandConfig:
    joint_names: List[str] = field(default_factory=list)
    joint_names_en: Optional[List[str]] = None
    init_pos: List[int] = field(default_factory=list)
    preset_actions: Optional[Dict[str, List[int]]] = None

# ------------------------------------------------------------------
# 常量字典（仅构建一次）
# ------------------------------------------------------------------
_HAND_CONFIGS: Dict[str, HandConfig] = {
    "L25": HandConfig(
        joint_names=["大拇指根部", "食指根部", "中指根部", "无名指根部", "小拇指根部",
                     "大拇指侧摆", "食指侧摆", "中指侧摆", "无名指侧摆", "小拇指侧摆",
                     "大拇指横滚", "预留", "预留", "预留", "预留", "大拇指中部", "食指中部",
                     "中指中部", "无名指中部", "小拇指中部", "大拇指指尖", "食指指尖",
                     "中指指尖", "无名指指尖", "小拇指指尖"],
        init_pos=[255] * 25,
        preset_actions={
            "握拳": [0] * 25,
            "张开": [255] * 25,
            "OK": [255, 255, 255, 255, 255, 255, 255, 255, 255, 255,
                   255, 255, 255, 255, 255, 255, 0, 0, 255, 255,
                   0, 0, 0, 255, 255]
        }
    ),
    "L21": HandConfig(
        joint_names=["大拇指根部", "食指根部", "中指根部", "无名指根部", "小拇指根部",
                     "大拇指侧摆", "食指侧摆", "中指侧摆", "无名指侧摆", "小拇指侧摆",
                     "大拇指横滚", "预留", "预留", "预留", "预留", "大拇指中部", "预留",
                     "预留", "预留", "预留", "大拇指指尖", "食指指尖", "中指指尖",
                     "无名指指尖", "小拇指指尖"],
        init_pos=[255] * 25
    ),
    "L20": HandConfig(
        joint_names=["拇指根部", "食指根部", "中指根部", "无名指根部", "小指根部",
                     "拇指侧摆", "食指侧摆", "中指侧摆", "无名指侧摆", "小指侧摆",
                     "拇指横摆", "预留", "预留", "预留", "预留", "拇指尖部", "食指末端",
                     "中指末端", "无名指末端", "小指末端"],
        init_pos=[255, 255, 255, 255, 255, 255, 10, 100, 180, 240, 245, 255, 255, 255, 255, 255, 255, 255, 255, 255],
        preset_actions={
            "握拳": [40, 0, 0, 0, 0, 131, 10, 100, 180, 240, 19, 255, 255, 255, 255, 135, 0, 0, 0, 0],
            "张开": [255, 255, 255, 255, 255, 255, 10, 100, 180, 240, 245, 255, 255, 255, 255, 255, 255, 255, 255, 255],
            "OK": [191, 95, 255, 255, 255, 136, 107, 100, 180, 240, 72, 255, 255, 255, 255, 116, 99, 255, 255, 255],
            "点赞": [255, 0, 0, 0, 0, 127, 10, 100, 180, 240, 255, 255, 255, 255, 255, 255, 0, 0, 0, 0]
        }
    ),
    "L10": HandConfig(
        joint_names_en=["thumb_cmc_pitch", "thumb_cmc_roll", "index_mcp_pitch", "middle_mcp_pitch", "ring_mcp_pitch", "pinky_mcp_pitch",
                        "index_mcp_roll", "ring_mcp_roll", "pinky_mcp_roll", "thumb_cmc_yaw"],
        joint_names=["拇指根部", "拇指侧摆", "食指根部", "中指根部", "无名指根部",
                     "小指根部", "食指侧摆", "无名指侧摆", "小指侧摆", "拇指旋转"],
        init_pos=[255] * 10,
        preset_actions={
            "握拳": [75, 128, 0, 0, 0, 0, 128, 128, 128, 57],
            "张开": [255, 128, 255, 255, 255, 255, 128, 128, 128, 128],
            "OK": [110, 128, 75, 255, 255, 255, 128, 128, 128, 68],
            "点赞": [255, 145, 0, 0, 0, 0, 0, 255, 255, 65]
        }
    ),
    "L7": HandConfig(
        joint_names=["大拇指弯曲", "大拇指横摆", "食指弯曲", "中指弯曲", "无名指弯曲",
                     "小拇指弯曲", "拇指旋转"],
        init_pos=[250] * 7,
        preset_actions={
            "握拳": [71, 79, 0, 0, 0, 0, 64],
            "张开": [255, 111, 250, 250, 250, 250, 55],
            "OK": [141, 111, 168, 250, 250, 250, 86],
            "点赞": [255, 111, 0, 0, 0, 0, 86]
        }
    ),
    "O6": HandConfig(
        joint_names_en=["thumb_cmc_pitch", "thumb_cmc_yaw", "index_mcp_pitch", "middle_mcp_pitch", "pinky_mcp_pitch", "ring_mcp_pitch"],
        joint_names=["大拇指弯曲", "大拇指横摆", "食指弯曲", "中指弯曲", "无名指弯曲", "小拇指弯曲"],
        init_pos=[250] * 6,
        preset_actions={
            "张开": [250, 250, 250, 250, 250, 250],
            "壹": [125, 18, 255, 0, 0, 0],
            "贰": [92, 87, 255, 255, 0, 0],
            "叁": [92, 87, 255, 255, 255, 0],
            "肆": [92, 87, 255, 255, 255, 255],
            "伍": [255, 255, 255, 255, 255, 255],
            "OK": [96, 100, 118, 250, 250, 250],
            "点赞": [250, 79, 0, 0, 0, 0],
            "握拳": [102, 18, 0, 0, 0, 0],
        }
    ),
    "L6": HandConfig(
        joint_names_en=["thumb_cmc_pitch", "thumb_cmc_yaw", "index_mcp_pitch", "middle_mcp_pitch", "pinky_mcp_pitch", "ring_mcp_pitch"],
        joint_names=["大拇指弯曲", "大拇指横摆", "食指弯曲", "中指弯曲", "无名指弯曲", "小拇指弯曲"],
        init_pos=[250] * 6,
        preset_actions={
            "张开": [250, 250, 250, 250, 250, 250],
            "壹": [0, 18, 255, 0, 0, 0],
            "贰": [0, 39, 255, 255, 0, 0],
            "叁": [0, 39, 255, 255, 255, 0],
            "肆": [0, 0, 255, 255, 255, 255],
            "伍": [255, 255, 255, 255, 255, 255],
            "OK": [74, 13, 153, 255, 255, 255],
            "点赞": [255, 255, 0, 0, 0, 0],
            "握拳": [79, 11, 0, 0, 0, 0],
            "序列动作1": [250, 250, 250, 250, 250, 250],
            "序列动作2": [250, 250, 0, 250, 250, 0],
            "序列动作3": [250, 250, 0, 0, 0, 0],
            "序列动作4": [250, 250, 0, 0, 0, 255],
            "序列动作5": [250, 250, 0, 0, 255, 255],
            "序列动作6": [250, 250, 0, 255, 255, 255],
            "序列动作7": [250, 250, 250, 250, 250, 250],
            "食指压感准备1": [0, 18, 255, 0, 0, 0],
            "食指压感测试": [9, 42, 55, 250, 250, 250],
            "食指压感准备2": [0, 18, 255, 0, 0, 0],
            "拇指压感准备1": [139, 18, 130, 0, 0, 0],
            "拇指压感测试": [39, 30, 122, 250, 250, 250],
            "拇指压感准备2": [139, 18, 130, 0, 0, 0]
        }
    ),
}
HAND_CONFIGS = MappingProxyType(_HAND_CONFIGS)
